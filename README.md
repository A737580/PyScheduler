# PyScheduler

**PyScheduler** — это консольное приложение на Python 3.13, предназначенное для работы с графиком занятости работника. 
Позволяет находить свободные и занятые промежутки, проверять доступность времени, а также подбирать подходящее окно под длительность заявки.

---

## Стек технологий

```txt
- Python 3.13
- Стандартная библиотека Python: urllib, json, typing, unittest
- Без сторонних зависимостей (requirements.txt пуст)
```

## Основной функционал

    Получение всех занятых промежутков времени на заданную дату

    Определение свободного времени на дату

    Проверка доступности конкретного промежутка

    Поиск свободного времени заданной продолжительности

    Источник графика: GET https://ofc-test-01.tspb.su/test-task/


## Архитектурные особенности

Проект построен по упрощённой модульной структуре, вдохновлённой архитектурой современных фреймворков (например, ASP.NET Core, Django).  
Несмотря на то, что приложение является консольным, в нём применены несколько архитектурных паттернов:

### Применённые паттерны

- **Service Layer**  
    Бизнес-логика вынесена в отдельный класс `ScheduleManagementService`.  
    Это позволяет чётко разделить ответственность:
    - Хендлеры (`SchedulerHandler`) обрабатывают пользовательский ввод и команды;
    - Сервисы выполняют основную логику и взаимодействуют с данными.

- **Dependency Injection**  
    Все зависимости передаются через конструктор, а не создаются внутри классов. Такой подход делает компоненты изолированными и легко тестируемыми с помощью моков.
    Например:
    ```python
    service = ScheduleManagementService(data_store)
    handler = SchedulerHandler(service)
    ```

- **Command** 
    Паттерн используется в упрощённой форме — каждый метод хендлера (list_busy_slots_command, find_slot_for_duration_command) инкапсулирует выполнение конкретной команды пользователя.

В будущем проект можно расширить, внедрив полноценную регистрацию зависимостей, фабрики, и автоматическую маршрутизацию команд. Сейчас структура проста и понятна, но требует ручного подключения компонентов и конечных точек в builder.py.

## Структура проекта
```txt
PyScheduler/
├── src/
│   ├── core/                         # Ядро приложения (инициализация, маршрутизация команд)
│   ├── data/                         # Источники данных (в памяти)
│   ├── handlers/                     # Обработчики команд
│   ├── local_data/                   # Локальный JSON-файл с графиком
│   ├── models/                       # Модели: Day, Timeslot
│   └── services/                     # Загрузка и логика планирования
├── tests/
│   └── unit/                         # Юнит-тесты
├── main.py                           # Точка входа в приложение
├── requirements.txt                  # Зависимости
├── Exesurce.md                       # Вспомогательная документация
└── README.md                         # Документация проекта
```
## Тестирование
    Юнит-тесты находятся в папке tests/unit.

    Запуск тестов:
    ```python
    python -m unittest discover tests/unit
    ```     
## Пример использования
    ```bash
    python main.py https://ofc-test-01.tspb.su/test-task/
    ```
    Далее будет предложен ввод команды, например:
        get_busy_slots 2025-07-19
        get_free_slots 2025-07-24
        is_avalibale 2025-07-24 10:00 11:30
        find_slot_for_duration 60
        help
        exit

## Планы по развитию
```txt
[+] Реализованы основные функции планирования
[+] Структура вдохновлена современными веб-фреймворками
[+] Реализован CLI-интерфейс и команда-роутинг
[+] Покрытие юнит-тестами

[ ] Внедрение паттернов: DI, Strategy, Command
[ ] Упрощение добавления новых команд
[ ] Возможность перехода на полноценный web-интерфейс
[ ] Поддержка plug-in контроллеров (автоматическая регистрация)
[ ] Docker-файл и интеграция с CI
```